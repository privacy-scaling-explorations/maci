"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2425],{5542:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>c});var s=i(5893),l=i(1151);const t={title:"Installing MACI",description:"How to install MACI",sidebar_label:"Installation",sidebar_position:2},a="Installation",r={id:"v1.x/installation",title:"Installing MACI",description:"How to install MACI",source:"@site/docs/v1.x/installation.md",sourceDirName:"v1.x",slug:"/v1.x/installation",permalink:"/maci/docs/v1.x/installation",draft:!1,unlisted:!1,editUrl:"https://github.com/privacy-scaling-explorations/maci/edit/dev/website/docs/v1.x/installation.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Installing MACI",description:"How to install MACI",sidebar_label:"Installation",sidebar_position:2},sidebar:"docSidebar",previous:{title:"Primitives",permalink:"/maci/docs/v1.x/primitives"},next:{title:"Testing",permalink:"/maci/docs/v1.x/testing"}},o={},c=[{value:"Requirements",id:"requirements",level:2},{value:"Installation",id:"installation-1",level:2},{value:"Install <code>rapidsnark</code> (if on an intel chip)",id:"install-rapidsnark-if-on-an-intel-chip",level:3},{value:"Install circom v2:",id:"install-circom-v2",level:3},{value:"Install MACI",id:"install-maci",level:3},{value:"Configure zkey-manager",id:"configure-zkey-manager",level:3},{value:"Download <code>.zkey</code> files",id:"download-zkey-files",level:3},{value:"Generate <code>.zkey</code> files",id:"generate-zkey-files",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,s.jsx)(n.p,{children:"You need the following to use MACI:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Node.js: use ",(0,s.jsx)(n.a,{href:"https://github.com/nvm-sh/nvm",children:(0,s.jsx)(n.code,{children:"nvm"})})," to install it. MACI has\nbeen tested with Node 14, 16 and 18. We do however recommend to use Node 18 as Node 14 is deprecated and Node 16 will soon be deprecated too."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.a,{href:"https://github.com/iden3/rapidsnark",children:(0,s.jsx)(n.code,{children:"rapidsnark"})})," tool if running on an intel chip (this allows for faster proof generation vs snarkjs)."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"installation-1",children:"Installation"}),"\n",(0,s.jsxs)(n.h3,{id:"install-rapidsnark-if-on-an-intel-chip",children:["Install ",(0,s.jsx)(n.code,{children:"rapidsnark"})," (if on an intel chip)"]}),"\n",(0,s.jsx)(n.p,{children:"First, install dependencies:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install build-essential libgmp-dev libsodium-dev nasm git\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Next, clone ",(0,s.jsx)(n.code,{children:"rapidsnark"})," and build it:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/iden3/rapidsnark.git && \\\ncd rapidsnark && \\\ngit checkout 1c13721de4a316b0b254c310ccec9341f5e2208e\n\nnpm install && \\\ngit submodule init && \\\ngit submodule update && \\\nnpx task createFieldSources && \\\nnpx task buildProver\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Note the location of the ",(0,s.jsx)(n.code,{children:"rapidsnark"})," binary (e.g.\n",(0,s.jsx)(n.code,{children:"/home/user/rapidsnark/build/prover"}),")."]}),"\n",(0,s.jsx)(n.h3,{id:"install-circom-v2",children:"Install circom v2:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://docs.circom.io/",children:"https://docs.circom.io/"})}),"\n",(0,s.jsxs)(n.p,{children:["Note the location of the ",(0,s.jsx)(n.code,{children:"circom"})," binary (e.g. ",(0,s.jsx)(n.code,{children:"$HOME/.cargo/bin/circom"}),"), as you will need it later."]}),"\n",(0,s.jsx)(n.h3,{id:"install-maci",children:"Install MACI"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/privacy-scaling-explorations/maci.git && \\\ncd maci && \\\nnpm i && \\\nnpm run bootstrap && \\\nnpm run build\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Install dependencies for and ",(0,s.jsx)(n.code,{children:"zkey-manager"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install libgmp-dev nlohmann-json3-dev nasm g++\n"})}),"\n",(0,s.jsx)(n.h3,{id:"configure-zkey-manager",children:"Configure zkey-manager"}),"\n",(0,s.jsxs)(n.p,{children:["Edit ",(0,s.jsx)(n.code,{children:"cli/zkeys.config.yml"})," to include the relative path to the\ncircom binary."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:'...\ncircomPath: "RELATIVE_PATH_TO_CIRCOM"\n...\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"download-zkey-files",children:["Download ",(0,s.jsx)(n.code,{children:".zkey"})," files"]}),"\n",(0,s.jsxs)(n.p,{children:["MACI has two main zk-SNARK circuits (plus an optional Subsidy circuit). Each circuit is parameterised. There should one\n",(0,s.jsx)(n.code,{children:".zkey"})," file for each circuit and set of parameters."]}),"\n",(0,s.jsxs)(n.p,{children:["Unless you wish to generate a fresh set of ",(0,s.jsx)(n.code,{children:".zkey"})," files, you should obtain\nthem from someone who has performed a multi-party trusted setup for said\ncircuits.."]}),"\n",(0,s.jsxs)(n.p,{children:["Note the locations of the ",(0,s.jsx)(n.code,{children:".zkey"})," files as the CLI requires them as\ncommand-line flags."]}),"\n",(0,s.jsxs)(n.h3,{id:"generate-zkey-files",children:["Generate ",(0,s.jsx)(n.code,{children:".zkey"})," files"]}),"\n",(0,s.jsxs)(n.p,{children:["If you wish to generate ",(0,s.jsx)(n.code,{children:".zkey"})," files from scratch, first navigate to ",(0,s.jsx)(n.code,{children:"cli/"}),"\nand edit ",(0,s.jsx)(n.code,{children:"zkeys.config.yml"}),". Set the parameters you need."]}),"\n",(0,s.jsx)(n.p,{children:"Next, run the following to compile the circuits with parameters you specified:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npx zkey-manager compile -c zkeys.config.yml\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Next, download the ",(0,s.jsx)(n.code,{children:".ptau"})," file:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npx zkey-manager downloadPtau -c zkeys.config.yml\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Finally, generate the ",(0,s.jsx)(n.code,{children:".zkey"})," files. This may require a lot of memory and time."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npx zkey-manager genZkeys -c zkeys.config.yml\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>r,a:()=>a});var s=i(7294);const l={},t=s.createContext(l);function a(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);